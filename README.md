# @king-3/file-kit

> ğŸ”§ å¤šåŠŸèƒ½æ–‡ä»¶å·¥å…·ç®± â€” Base64 è½¬æ¢ Â· è§†é¢‘è½¬éŸ³é¢‘ Â· æ–‡ä»¶åŠ å¯†/è§£å¯†

[![npm version](https://img.shields.io/npm/v/@king-3/file-kit.svg)](https://www.npmjs.com/package/@king-3/file-kit)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

- ğŸ“„ **Base64 è½¬æ¢** - æ–‡ä»¶ â†” Base64 JSONï¼Œæ”¯æŒåŒå‘è½¬æ¢å’Œå®Œæ•´è¿˜åŸ
- ğŸµ **è§†é¢‘è½¬éŸ³é¢‘** - ä»è§†é¢‘ä¸­æå–éŸ³é¢‘è½¨é“ï¼Œæ”¯æŒ 5 ç§æ ¼å¼å’Œ 3 ç§è´¨é‡çº§åˆ«
- ğŸ” **æ–‡ä»¶åŠ å¯†/è§£å¯†** - åŸºäº AES-256-GCM çš„å†›äº‹çº§åŠ å¯†ï¼Œç¡®ä¿æ•°æ®å®‰å…¨

## ğŸ“¦ å®‰è£…

### å…¨å±€å®‰è£…ï¼ˆæ¨èï¼‰

```bash
# ä½¿ç”¨ pnpm
pnpm install @king-3/file-kit -g

# ä½¿ç”¨ npm
npm install @king-3/file-kit -g

# ä½¿ç”¨ yarn
yarn global add @king-3/file-kit
```

### æœ¬åœ°å®‰è£…

```bash
pnpm install @king-3/file-kit --save-dev
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‘½ä»¤è¡Œæ¨¡å¼

```bash
# æŸ¥çœ‹å¸®åŠ©
fkt --help

# æŸ¥çœ‹ç‰ˆæœ¬
fkt --version

# å¯åŠ¨äº¤äº’æ¨¡å¼
fkt -i
```

### äº¤äº’æ¨¡å¼

äº¤äº’æ¨¡å¼æä¾›å‹å¥½çš„å¯è§†åŒ–ç•Œé¢ï¼Œä¸€æ­¥æ­¥å¼•å¯¼æ‚¨å®Œæˆæ“ä½œï¼š

```bash
fkt -i
```

è¿›å…¥äº¤äº’æ¨¡å¼åï¼Œä½ å¯ä»¥é€šè¿‡æ–¹å‘é”®é€‰æ‹©ä»¥ä¸‹åŠŸèƒ½ï¼š

- ğŸ“¦ æ–‡ä»¶è½¬ Base64
- ğŸ”„ Base64 è¿˜åŸæ–‡ä»¶
- ğŸµ è§†é¢‘æå–éŸ³é¢‘
- ğŸ” æ–‡ä»¶åŠ å¯†
- ğŸ”“ æ–‡ä»¶è§£å¯†

---

## ğŸ“– åŠŸèƒ½è¯¦è§£

### 1ï¸âƒ£ Base64 è½¬æ¢

å°†ä»»æ„æ–‡ä»¶ç¼–ç ä¸º Base64 æ ¼å¼å¹¶ä¿å­˜ä¸º JSON æ–‡ä»¶ï¼Œé€‚ç”¨äº API ä¼ è¾“ã€æ•°æ®åº“å­˜å‚¨ç­‰åœºæ™¯ã€‚

#### åŸºç¡€ç”¨æ³•

```bash
fkt base64 <æ–‡ä»¶è·¯å¾„> [é€‰é¡¹]
```

#### ä½¿ç”¨ç¤ºä¾‹

```bash
# è½¬æ¢æ–‡æœ¬æ–‡ä»¶
fkt base64 document.txt

# è½¬æ¢å›¾ç‰‡
fkt base64 photo.jpg

# è½¬æ¢ PDF
fkt base64 report.pdf

# æŒ‡å®šè¾“å‡ºç›®å½•
fkt base64 file.txt -o ./output
```

#### è¾“å‡ºæ ¼å¼

ç”Ÿæˆçš„ JSON æ–‡ä»¶æ ¼å¼å¦‚ä¸‹ï¼š

```json
{
  "type": "base64",
  "createdAt": "2024-12-16 10:30:45",
  "file": {
    "name": "document.txt",
    "extension": ".txt",
    "size": 1024,
    "base64": "SGVsbG8gV29ybGQh..."
  }
}
```

#### å‘½ä»¤é€‰é¡¹

| é€‰é¡¹                  | æè¿°                           |
| --------------------- | ------------------------------ |
| `-o, --output <path>` | æŒ‡å®šè¾“å‡ºç›®å½•ï¼ˆé»˜è®¤ï¼šå½“å‰ç›®å½•ï¼‰ |
| `-h, --help`          | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯                   |

---

### 2ï¸âƒ£ Base64 è¿˜åŸ

ä» Base64 JSON æ–‡ä»¶æ¢å¤åŸå§‹æ–‡ä»¶ã€‚

#### åŸºç¡€ç”¨æ³•

```bash
fkt restore <JSONæ–‡ä»¶è·¯å¾„> [é€‰é¡¹]
```

#### ä½¿ç”¨ç¤ºä¾‹

```bash
# è¿˜åŸæ–‡ä»¶ï¼ˆé»˜è®¤è¾“å‡ºåˆ°å½“å‰ç›®å½•ï¼‰
fkt restore archive.base64.json

# æŒ‡å®šè¾“å‡ºç›®å½•
fkt restore archive.base64.json -o ./restored
```

#### ç‰¹æ€§

- âœ… ä¿ç•™åŸå§‹æ–‡ä»¶å¤§å°ä¿¡æ¯
- âœ… æ˜¾ç¤ºåŸå§‹åˆ›å»ºæ—¶é—´æˆ³
- âœ… éªŒè¯ JSON æ ¼å¼å®Œæ•´æ€§

#### å‘½ä»¤é€‰é¡¹

| é€‰é¡¹                  | æè¿°                           |
| --------------------- | ------------------------------ |
| `-o, --output <path>` | æŒ‡å®šè¾“å‡ºç›®å½•ï¼ˆé»˜è®¤ï¼šå½“å‰ç›®å½•ï¼‰ |
| `-h, --help`          | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯                   |

---

### 3ï¸âƒ£ è§†é¢‘è½¬éŸ³é¢‘

ä»è§†é¢‘æ–‡ä»¶ä¸­æå–éŸ³é¢‘è½¨é“ï¼Œæ”¯æŒå¤šç§æ ¼å¼å’Œè´¨é‡é€‰é¡¹ã€‚åº•å±‚ä½¿ç”¨ FFmpeg è¿›è¡Œä¸“ä¸šçº§éŸ³è§†é¢‘å¤„ç†ã€‚

#### åŸºç¡€ç”¨æ³•

```bash
fkt video-to-audio <è§†é¢‘æ–‡ä»¶> [é€‰é¡¹]
# æˆ–ä½¿ç”¨åˆ«å
fkt v2a <è§†é¢‘æ–‡ä»¶> [é€‰é¡¹]
```

#### æ”¯æŒçš„éŸ³é¢‘æ ¼å¼

| æ ¼å¼     | æ‰©å±•å  | ç¼–ç å™¨     | ç‰¹ç‚¹           | é€‚ç”¨åœºæ™¯        |
| -------- | ------- | ---------- | -------------- | --------------- |
| **MP3**  | `.mp3`  | libmp3lame | æœ€ä½³å…¼å®¹æ€§     | æ—¥å¸¸ä½¿ç”¨ã€åˆ†äº«  |
| **AAC**  | `.m4a`  | aac        | Apple ç”Ÿæ€ä¼˜åŒ– | iOS/macOS è®¾å¤‡  |
| **FLAC** | `.flac` | flac       | æ— æŸå‹ç¼©       | éŸ³ä¹æ”¶è—ã€å½’æ¡£  |
| **ALAC** | `.m4a`  | alac       | Apple æ— æŸæ ¼å¼ | iTunes/iOS æ— æŸ |
| **WAV**  | `.wav`  | pcm_s16le  | æœªå‹ç¼©åŸå§‹éŸ³é¢‘ | ä¸“ä¸šéŸ³é¢‘ç¼–è¾‘    |

#### è´¨é‡é€‰é¡¹

| è´¨é‡       | MP3  | AAC  | FLAC   | è¯´æ˜             |
| ---------- | ---- | ---- | ------ | ---------------- |
| **low**    | 128k | 128k | çº§åˆ« 0 | å¿«é€Ÿï¼Œæ–‡ä»¶å°     |
| **medium** | 192k | 192k | çº§åˆ« 5 | å¹³è¡¡è´¨é‡ï¼ˆæ¨èï¼‰ |
| **high**   | 320k | 256k | çº§åˆ« 8 | æœ€ä½³è´¨é‡         |

#### ä½¿ç”¨ç¤ºä¾‹

**åŸºç¡€è½¬æ¢**

```bash
# äº¤äº’å¼é€‰æ‹©æ ¼å¼å’Œè´¨é‡
fkt v2a video.mp4
```

**æŒ‡å®šæ ¼å¼å’Œè´¨é‡**

```bash
# è½¬æ¢ä¸ºé«˜è´¨é‡ MP3
fkt v2a video.mp4 -f mp3 -q high

# è½¬æ¢ä¸ºä¸­ç­‰è´¨é‡ AAC
fkt v2a video.mp4 -f aac -q medium

# è½¬æ¢ä¸ºæ— æŸ FLAC
fkt v2a video.mp4 -f flac -q high
```

**æŒ‡å®šè¾“å‡ºè·¯å¾„**

```bash
# æŒ‡å®šè¾“å‡ºç›®å½•
fkt v2a video.mp4 -o ./audio -f mp3 -q high

# è¾“å‡ºæ–‡ä»¶: ./audio/video.mp3
```

**æ‰¹é‡è½¬æ¢**

```bash
# ä½¿ç”¨ shell å¾ªç¯æ‰¹é‡è½¬æ¢
for file in *.mp4; do
  fkt v2a "$file" -f mp3 -q high
done
```

#### è¿›åº¦æ˜¾ç¤º

è½¬æ¢è¿‡ç¨‹ä¸­ä¼šå®æ—¶æ˜¾ç¤ºè¿›åº¦ï¼š

```
â ‹ æ­£åœ¨æå–éŸ³é¢‘ 45%
```

å®Œæˆåæ˜¾ç¤ºè¾“å‡ºè·¯å¾„ï¼š

```
âœ” éŸ³é¢‘å·²æå–åˆ°: ./video.mp3
```

#### å‘½ä»¤é€‰é¡¹

| é€‰é¡¹                  | æè¿°                              |
| --------------------- | --------------------------------- |
| `-f, --format <fmt>`  | éŸ³é¢‘æ ¼å¼ï¼ˆmp3/aac/flac/alac/wavï¼‰ |
| `-q, --quality <qlt>` | éŸ³é¢‘è´¨é‡ï¼ˆlow/medium/highï¼‰       |
| `-o, --output <path>` | è¾“å‡ºç›®å½•ï¼ˆé»˜è®¤ï¼šè§†é¢‘æ‰€åœ¨ç›®å½•ï¼‰    |
| `-h, --help`          | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯                      |

---

### 4ï¸âƒ£ æ–‡ä»¶åŠ å¯†

ä½¿ç”¨ AES-256-GCM ç®—æ³•å¯¹æ–‡ä»¶è¿›è¡ŒåŠ å¯†ï¼Œç”ŸæˆåŠ å¯†çš„ JSON æ–‡ä»¶ã€‚

#### åŠ å¯†ç®—æ³•

- **ç®—æ³•**ï¼šAES-256-GCMï¼ˆGalois/Counter Modeï¼‰
- **å¯†é’¥æ´¾ç”Ÿ**ï¼šPBKDF2-SHA256ï¼ˆ100,000 æ¬¡è¿­ä»£ï¼‰
- **åˆå§‹åŒ–å‘é‡**ï¼š16 å­—èŠ‚éšæœºç”Ÿæˆ
- **ç›å€¼**ï¼š32 å­—èŠ‚éšæœºç”Ÿæˆ
- **è®¤è¯æ ‡ç­¾**ï¼šGCM æ¨¡å¼è‡ªåŠ¨ç”Ÿæˆï¼Œç¡®ä¿æ•°æ®å®Œæ•´æ€§

#### åŸºç¡€ç”¨æ³•

```bash
fkt encrypt <æ–‡ä»¶è·¯å¾„> [é€‰é¡¹]
```

#### ä½¿ç”¨ç¤ºä¾‹

```bash
# äº¤äº’å¼åŠ å¯†ï¼ˆä¼šæç¤ºè¾“å…¥å¯†ç ï¼‰
fkt encrypt secret.txt

# å‘½ä»¤è¡ŒæŒ‡å®šå¯†ç 
fkt encrypt secret.txt -p myPassword123

# æŒ‡å®šè¾“å‡ºç›®å½•
fkt encrypt secret.txt -o ./encrypted -p myPassword123
```

#### è¾“å‡ºæ ¼å¼

ç”Ÿæˆçš„åŠ å¯† JSON æ–‡ä»¶æ ¼å¼ï¼š

```json
{
  "type": "crypto",
  "algorithm": "aes-256-gcm",
  "createdAt": "2024-12-16 10:30:45",
  "file": {
    "name": "secret.txt",
    "extension": ".txt",
    "size": 2048,
    "iv": "base64_encoded_iv",
    "authTag": "base64_encoded_auth_tag",
    "salt": "base64_encoded_salt",
    "encrypted": "base64_encoded_data"
  }
}
```

#### å®‰å…¨å»ºè®®

- âš ï¸ **è¯·å¦¥å–„ä¿ç®¡å¯†ç **ï¼Œä¸¢å¤±åæ— æ³•æ¢å¤æ–‡ä»¶
- ğŸ”’ å¯†ç é•¿åº¦è‡³å°‘ 6 ä½ï¼Œå»ºè®®ä½¿ç”¨å¼ºå¯†ç 
- ğŸ’¾ å»ºè®®å¤‡ä»½åŠ å¯†æ–‡ä»¶åˆ°å®‰å…¨ä½ç½®
- ğŸ”‘ ä¸è¦åœ¨å‘½ä»¤è¡Œç›´æ¥æš´éœ²å¯†ç ï¼ˆä½¿ç”¨äº¤äº’æ¨¡å¼ï¼‰

#### å‘½ä»¤é€‰é¡¹

| é€‰é¡¹                   | æè¿°                             |
| ---------------------- | -------------------------------- |
| `-p, --password <pwd>` | åŠ å¯†å¯†ç ï¼ˆå»ºè®®ä½¿ç”¨äº¤äº’æ¨¡å¼è¾“å…¥ï¼‰ |
| `-o, --output <path>`  | è¾“å‡ºç›®å½•ï¼ˆé»˜è®¤ï¼šå½“å‰ç›®å½•ï¼‰       |
| `-h, --help`           | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯                     |

---

### 5ï¸âƒ£ æ–‡ä»¶è§£å¯†

ä»åŠ å¯†çš„ JSON æ–‡ä»¶ä¸­è§£å¯†å¹¶è¿˜åŸåŸå§‹æ–‡ä»¶ã€‚

#### åŸºç¡€ç”¨æ³•

```bash
fkt decrypt <åŠ å¯†JSONæ–‡ä»¶> [é€‰é¡¹]
```

#### ä½¿ç”¨ç¤ºä¾‹

```bash
# äº¤äº’å¼è§£å¯†ï¼ˆä¼šæç¤ºè¾“å…¥å¯†ç ï¼‰
fkt decrypt secret.crypto.json

# å‘½ä»¤è¡ŒæŒ‡å®šå¯†ç 
fkt decrypt secret.crypto.json -p myPassword123

# æŒ‡å®šè¾“å‡ºç›®å½•
fkt decrypt secret.crypto.json -o ./decrypted -p myPassword123
```

#### ç‰¹æ€§

- âœ… è‡ªåŠ¨éªŒè¯å¯†ç æ­£ç¡®æ€§
- âœ… éªŒè¯æ•°æ®å®Œæ•´æ€§ï¼ˆé€šè¿‡ GCM è®¤è¯æ ‡ç­¾ï¼‰
- âœ… è¿˜åŸåŸå§‹æ–‡ä»¶åå’Œæ‰©å±•å
- âœ… å¯†ç é”™è¯¯æ—¶å‹å¥½æç¤º

#### é”™è¯¯å¤„ç†

å¦‚æœå¯†ç é”™è¯¯ï¼Œä¼šæ˜¾ç¤ºä»¥ä¸‹æç¤ºï¼š

```
âœ– è§£å¯†å¤±è´¥ï¼šå¯†ç é”™è¯¯æˆ–æ–‡ä»¶å·²æŸå
```

#### å‘½ä»¤é€‰é¡¹

| é€‰é¡¹                   | æè¿°                             |
| ---------------------- | -------------------------------- |
| `-p, --password <pwd>` | è§£å¯†å¯†ç ï¼ˆå»ºè®®ä½¿ç”¨äº¤äº’æ¨¡å¼è¾“å…¥ï¼‰ |
| `-o, --output <path>`  | è¾“å‡ºç›®å½•ï¼ˆé»˜è®¤ï¼šå½“å‰ç›®å½•ï¼‰       |
| `-h, --help`           | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯                     |

---

## ğŸ® å‘½ä»¤å‚è€ƒ

### å…¨å±€é€‰é¡¹

| é€‰é¡¹            | åˆ«å | æè¿°         |
| --------------- | ---- | ------------ |
| `--help`        | `-h` | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ |
| `--version`     | `-v` | æ˜¾ç¤ºç‰ˆæœ¬å·   |
| `--interactive` | `-i` | å¯åŠ¨äº¤äº’æ¨¡å¼ |

### å‘½ä»¤åˆ—è¡¨

| å‘½ä»¤                     | åˆ«å  | æè¿°            |
| ------------------------ | ----- | --------------- |
| `base64 <input>`         | -     | æ–‡ä»¶è½¬ Base64   |
| `restore <input>`        | -     | Base64 è¿˜åŸæ–‡ä»¶ |
| `video-to-audio <input>` | `v2a` | è§†é¢‘æå–éŸ³é¢‘    |
| `encrypt <input>`        | -     | æ–‡ä»¶åŠ å¯†        |
| `decrypt <input>`        | -     | æ–‡ä»¶è§£å¯†        |

---

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1ï¼šæ–‡ä»¶åˆ†äº«ä¸å­˜å‚¨

**é—®é¢˜**ï¼šéœ€è¦å°†äºŒè¿›åˆ¶æ–‡ä»¶è½¬æ¢ä¸ºæ–‡æœ¬æ ¼å¼ï¼Œä¾¿äºåœ¨ API æˆ–æ•°æ®åº“ä¸­å­˜å‚¨å’Œä¼ è¾“ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# è½¬æ¢ä¸º Base64
fkt base64 document.pdf -o ./archive

# é€šè¿‡ API ä¼ è¾“æˆ–å­˜å‚¨åˆ°æ•°æ®åº“
# ...

# éœ€è¦æ—¶è¿˜åŸ
fkt restore ./archive/document.json -o ./restored
```

---

### åœºæ™¯ 2ï¼šæ•æ„Ÿæ–‡ä»¶åŠ å¯†å­˜å‚¨

**é—®é¢˜**ï¼šéœ€è¦å®‰å…¨å­˜å‚¨æ•æ„Ÿæ–‡ä»¶ï¼Œå¦‚åˆåŒã€èº«ä»½è¯ä»¶ç­‰ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# åŠ å¯†æ–‡ä»¶
fkt encrypt contract.pdf -o ./encrypted

# å®‰å…¨ä¼ è¾“æˆ–å¤‡ä»½åŠ å¯†æ–‡ä»¶
# ...

# éœ€è¦æ—¶è§£å¯†
fkt decrypt ./encrypted/contract.crypto.json -o ./restored
```

---

### åœºæ™¯ 3ï¼šè§†é¢‘ç´ æéŸ³é¢‘æå–

**é—®é¢˜**ï¼šä»è§†é¢‘ç´ æä¸­æå–éŸ³é¢‘ç”¨äºåæœŸåˆ¶ä½œæˆ–éŸ³ä¹æ”¶è—ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# æå–é«˜è´¨é‡ MP3ï¼ˆæ—¥å¸¸ä½¿ç”¨ï¼‰
fkt v2a interview.mp4 -f mp3 -q high -o ./audio

# æå–æ— æŸ FLACï¼ˆä¸“ä¸šç¼–è¾‘ï¼‰
fkt v2a concert.mp4 -f flac -q high -o ./audio

# Apple è®¾å¤‡ä½¿ç”¨ ALAC
fkt v2a music_video.mp4 -f alac -q high -o ./audio
```

---

### åœºæ™¯ 4ï¼šè‡ªåŠ¨åŒ–å·¥ä½œæµ

**é—®é¢˜**ï¼šéœ€è¦æ‰¹é‡å¤„ç†å¤šä¸ªæ–‡ä»¶ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# æ‰¹é‡åŠ å¯†
for file in *.txt; do
  fkt encrypt "$file" -p myPassword123 -o ./encrypted
done

# æ‰¹é‡è½¬æ¢è§†é¢‘
for video in *.mp4; do
  fkt v2a "$video" -f mp3 -q high -o ./audio
done
```

---

## ğŸ“Š æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         CLI å±‚ (cli.ts)             â”‚  â† Citty å‘½ä»¤è¡Œè§£æ
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       Config å±‚ (config/)           â”‚  â† é…ç½®ç®¡ç†
â”‚  â€¢ defaults.ts                      â”‚     - CLI é»˜è®¤é…ç½®
â”‚  â€¢ audio-formats.ts                 â”‚     - éŸ³é¢‘æ ¼å¼é…ç½®
â”‚  â€¢ crypto-algorithm.ts              â”‚     - åŠ å¯†ç®—æ³•é…ç½®
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      Commands å±‚ (commands/)        â”‚  â† å‘½ä»¤å¤„ç†
â”‚  â€¢ base64.ts                        â”‚     - Base64 è½¬æ¢å‘½ä»¤
â”‚  â€¢ restore.ts                       â”‚     - Base64 è¿˜åŸå‘½ä»¤
â”‚  â€¢ video-to-audio.ts                â”‚     - è§†é¢‘è½¬éŸ³é¢‘å‘½ä»¤
â”‚  â€¢ encrypt.ts                       â”‚     - æ–‡ä»¶åŠ å¯†å‘½ä»¤
â”‚  â€¢ decrypt.ts                       â”‚     - æ–‡ä»¶è§£å¯†å‘½ä»¤
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        Core å±‚ (core/)              â”‚  â† æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚  â€¢ base64.ts                        â”‚     - Base64 ç¼–è§£ç 
â”‚  â€¢ crypto.ts                        â”‚     - åŠ å¯†è§£å¯†ç®—æ³•
â”‚  â€¢ extract.ts                       â”‚     - è§†é¢‘éŸ³é¢‘æå–
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       Utils å±‚ (utils/)             â”‚  â† é€šç”¨å·¥å…·å‡½æ•°
â”‚  â€¢ errors.ts                        â”‚     - é”™è¯¯å¤„ç†
â”‚  â€¢ helpers.ts                       â”‚     - å‘½ä»¤åŠ©æ‰‹
â”‚  â€¢ file.ts                          â”‚     - æ–‡ä»¶æ“ä½œ
â”‚  â€¢ logger.ts                        â”‚     - æ—¥å¿—è¾“å‡º
â”‚  â€¢ prompts.ts                       â”‚     - äº¤äº’æç¤º
â”‚  â€¢ time.ts                          â”‚     - æ—¶é—´æ ¼å¼åŒ–
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

| æŠ€æœ¯               | æè¿°                    | ç”¨é€”               |
| ------------------ | ----------------------- | ------------------ |
| **Citty**          | ç°ä»£åŒ–å‘½ä»¤è¡Œæ¡†æ¶        | CLI è·¯ç”±å’Œå‚æ•°è§£æ |
| **Clack Prompts**  | ç¾è§‚çš„äº¤äº’å¼ CLI æç¤ºåº“ | ç”¨æˆ·äº¤äº’ç•Œé¢       |
| **FFmpeg**         | å¼ºå¤§çš„å¤šåª’ä½“å¤„ç†å·¥å…·    | è§†é¢‘éŸ³é¢‘è½¬æ¢       |
| **Ansis**          | è½»é‡çº§ç»ˆç«¯é¢œè‰²åº“        | ç»ˆç«¯è¾“å‡ºç¾åŒ–       |
| **Node.js Crypto** | Node.js å†…ç½®åŠ å¯†æ¨¡å—    | AES-256-GCM åŠ å¯†   |

---

## âš™ï¸ é…ç½®

### ç¯å¢ƒå˜é‡

```bash
# å¼€å¯è°ƒè¯•æ¨¡å¼ï¼ˆæ˜¾ç¤ºè¯¦ç»†é”™è¯¯å †æ ˆï¼‰
DEBUG=1 fkt base64 file.txt

# æŒ‡å®š FFmpeg è·¯å¾„ï¼ˆå¦‚æœæœªåœ¨ PATH ä¸­ï¼‰
FFMPEG_PATH=/usr/local/bin/ffmpeg fkt v2a video.mp4
```

---

## ğŸ”§ å¸¸è§é—®é¢˜

### Q1: FFmpeg ç›¸å…³é”™è¯¯

**é”™è¯¯**ï¼š`FFmpeg æœªæ‰¾åˆ°` æˆ– `spawn ffmpeg ENOENT`

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
npm install @ffmpeg-installer/ffmpeg
```

---

### Q2: è§†é¢‘è½¬éŸ³é¢‘è¿›åº¦å¡ä½

**åŸå› **ï¼šè§†é¢‘æ–‡ä»¶æŸåæˆ–æ ¼å¼ä¸æ”¯æŒ

**è§£å†³æ–¹æ¡ˆ**ï¼š

1. æ£€æŸ¥è§†é¢‘æ–‡ä»¶æ˜¯å¦å®Œæ•´ï¼š

```bash
ffmpeg -i video.mp4
```

2. å°è¯•ä½¿ç”¨å…¶ä»–æ ¼å¼ï¼š

```bash
fkt v2a video.mp4 -f mp3
```

3. æ£€æŸ¥æ–‡ä»¶æƒé™ï¼š

```bash
ls -la video.mp4
```

---

### Q3: Base64 æ–‡ä»¶è¿‡å¤§

**åŸå› **ï¼šBase64 ç¼–ç ä¼šå¢åŠ çº¦ 33% çš„ä½“ç§¯

**å»ºè®®**ï¼š

- å¯¹äºå¤§æ–‡ä»¶ï¼ˆ>10MBï¼‰ï¼Œè€ƒè™‘å…ˆå‹ç¼©å†ç¼–ç 
- Base64 æ›´é€‚åˆå°å‹æ–‡ä»¶æˆ–éœ€è¦æ–‡æœ¬ä¼ è¾“çš„åœºæ™¯
- å¯¹äºå¤§å‹æ–‡ä»¶ï¼Œå»ºè®®ä½¿ç”¨åŠ å¯†åŠŸèƒ½è€Œé Base64

---

### Q4: åŠ å¯†/è§£å¯†å¤±è´¥

**é—®é¢˜**ï¼šå¯†ç é”™è¯¯æˆ–æ–‡ä»¶æŸå

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# ç¡®ä¿å¯†ç æ­£ç¡®ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰
fkt decrypt file.crypto.json -p correctPassword

# æ£€æŸ¥ JSON æ–‡ä»¶å®Œæ•´æ€§
cat file.crypto.json | jq

# éªŒè¯æ–‡ä»¶ç±»å‹
fkt decrypt file.crypto.json  # ä½¿ç”¨äº¤äº’æ¨¡å¼
```

---

### Q5: æƒé™é”™è¯¯

**é”™è¯¯**ï¼š`EACCES: permission denied`

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# æ£€æŸ¥æ–‡ä»¶æƒé™
ls -la file.txt

# ä¿®æ”¹æƒé™
chmod 644 file.txt

# æ£€æŸ¥ç›®å½•æƒé™
chmod 755 ./output
```

---

### Q6: å†…å­˜ä¸è¶³ï¼ˆå¤§æ–‡ä»¶å¤„ç†ï¼‰

**é—®é¢˜**ï¼šå¤„ç†å¤§æ–‡ä»¶æ—¶å†…å­˜æº¢å‡º

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# å¢åŠ  Node.js å†…å­˜é™åˆ¶
NODE_OPTIONS="--max-old-space-size=4096" fkt base64 large-file.zip
```

---

## ğŸ“ å¼€å‘

### æœ¬åœ°å¼€å‘

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/coderking3/file-kit.git
cd file-kit

# å®‰è£…ä¾èµ–
pnpm install

# å¼€å‘æ¨¡å¼è¿è¡Œ
pnpm dev base64 test.txt

# ç±»å‹æ£€æŸ¥
pnpm typecheck

# ä»£ç æ ¼å¼åŒ–
pnpm format

# ä»£ç æ£€æŸ¥
pnpm lint

# æ„å»º
pnpm build
```

### é¡¹ç›®ç»“æ„

```
file-kit/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ cli.ts              # CLI å…¥å£
â”‚   â”œâ”€â”€ config/             # é…ç½®å±‚
â”‚   â”‚   â”œâ”€â”€ defaults.ts
â”‚   â”‚   â”œâ”€â”€ audio-formats.ts
â”‚   â”‚   â””â”€â”€ crypto-algorithm.ts
â”‚   â”œâ”€â”€ commands/           # å‘½ä»¤å±‚
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ base64.ts
â”‚   â”‚   â”œâ”€â”€ restore.ts
â”‚   â”‚   â”œâ”€â”€ video-to-audio.ts
â”‚   â”‚   â”œâ”€â”€ encrypt.ts
â”‚   â”‚   â””â”€â”€ decrypt.ts
â”‚   â”œâ”€â”€ core/               # æ ¸å¿ƒé€»è¾‘å±‚
â”‚   â”‚   â”œâ”€â”€ base64.ts
â”‚   â”‚   â”œâ”€â”€ crypto.ts
â”‚   â”‚   â””â”€â”€ extract.ts
â”‚   â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°å±‚
â”‚   â”‚   â”œâ”€â”€ errors.ts
â”‚   â”‚   â”œâ”€â”€ file.ts
â”‚   â”‚   â”œâ”€â”€ helpers.ts
â”‚   â”‚   â”œâ”€â”€ logger.ts
â”‚   â”‚   â”œâ”€â”€ prompts.ts
â”‚   â”‚   â””â”€â”€ time.ts
â”‚   â””â”€â”€ types/              # ç±»å‹å®šä¹‰
â”‚       â””â”€â”€ index.ts
â”œâ”€â”€ bin/
â”‚   â””â”€â”€ cli.mjs             # å¯æ‰§è¡Œæ–‡ä»¶
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ README.md
```

### å‘å¸ƒæµç¨‹

```bash
# æ›´æ–°ç‰ˆæœ¬å·
pnpm release

# æ„å»ºå¹¶å‘å¸ƒ
pnpm build
pnpm publish
```

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ï¼ˆ`git checkout -b feature/AmazingFeature`ï¼‰
3. æäº¤æ›´æ”¹ï¼ˆ`git commit -m 'Add some AmazingFeature'`ï¼‰
4. æ¨é€åˆ°åˆ†æ”¯ï¼ˆ`git push origin feature/AmazingFeature`ï¼‰
5. å¼€å¯ Pull Request

### è´¡çŒ®æŒ‡å—

- éµå¾ªç°æœ‰ä»£ç é£æ ¼
- æ·»åŠ é€‚å½“çš„æµ‹è¯•
- æ›´æ–°ç›¸å…³æ–‡æ¡£
- ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡

---

## ğŸ“„ è®¸å¯è¯

[MIT License](LICENSE) Â© 2024 King3

---

## ğŸ”— ç›¸å…³é“¾æ¥

- ğŸ“¦ [NPM åŒ…](https://www.npmjs.com/package/@king-3/file-kit)
- ğŸ™ [GitHub ä»“åº“](https://github.com/coderking3/file-kit)
- ğŸ› [é—®é¢˜åé¦ˆ](https://github.com/coderking3/file-kit/issues)
- ğŸ“‹ [æ›´æ–°æ—¥å¿—](https://github.com/coderking3/file-kit/releases)

---

## ğŸ’¬ è”ç³»æ–¹å¼

- **ä½œè€…**ï¼šKing3
- **é‚®ç®±**ï¼šking3.wm@gmail.com
- **é—®é¢˜åé¦ˆ**ï¼š[GitHub Issues](https://github.com/coderking3/file-kit/issues)
