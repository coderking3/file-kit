# @king3/file-kit

> FileKit â€” å¤šåŠŸèƒ½æ–‡ä»¶å·¥å…·ç®±ï¼ˆBase64 è½¬æ¢ Â· è§†é¢‘è½¬éŸ³é¢‘ Â· æ–‡ä»¶åŠ å¯†/è§£å¯†ï¼‰

[![npm version](https://img.shields.io/npm/v/@king3/file-kit.svg)](https://www.npmjs.com/package/@king3/file-kit)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

- ğŸ“„ **Base64 è½¬æ¢**ï¼šæ–‡ä»¶ â†” Base64 JSONï¼Œæ”¯æŒè¿˜åŸæ¢å¤
- ğŸµ **è§†é¢‘è½¬éŸ³é¢‘**ï¼šæ”¯æŒå¤šç§æ ¼å¼ï¼Œä»è§†é¢‘æ–‡ä»¶æå–éŸ³é¢‘ (mp3 / m4a / flac / wav / alac)
- ğŸ” **æ–‡ä»¶åŠ å¯†/è§£å¯†**ï¼šæä¾› å®‰å…¨ã€å¯æ¢å¤çš„æ–‡ä»¶åŠ å¯†ä¸è§£å¯†èƒ½åŠ›ï¼Œé€‚ç”¨äºæ•æ„Ÿæ–‡ä»¶å­˜å‚¨ã€ä¼ è¾“æˆ–å¤‡ä»½åœºæ™¯ã€‚

## ğŸ“¦ å®‰è£…

### å…¨å±€å®‰è£…ï¼ˆæ¨èï¼‰

```bash
pnpm install @king-3/file-kit -g
# or
npm install @king-3/file-kit -g
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‘½ä»¤è¡Œæ¨¡å¼

```bash
# æŸ¥çœ‹å¸®åŠ©
fkt --help

# å¯åŠ¨äº¤äº’æ¨¡å¼ï¼ˆæ¨èæ–°æ‰‹ä½¿ç”¨ï¼‰
fkt -i
```

### äº¤äº’æ¨¡å¼

äº¤äº’æ¨¡å¼æä¾›å‹å¥½çš„å¯è§†åŒ–ç•Œé¢ï¼Œä¸€æ­¥æ­¥å¼•å¯¼æ‚¨å®Œæˆæ“ä½œï¼š

```bash
fkt -i
```

---

## ğŸ“– åŠŸèƒ½è¯¦è§£

### 1ï¸âƒ£ Base64 è½¬æ¢

#### å°†æ–‡ä»¶è½¬ä¸º Base64 JSON

å°†ä»»æ„æ–‡ä»¶ç¼–ç ä¸º Base64 æ ¼å¼å¹¶ä¿å­˜ä¸º JSON æ–‡ä»¶ã€‚

**åŸºç¡€ç”¨æ³•ï¼š**

```bash
fkt base64 <æ–‡ä»¶è·¯å¾„>
```

**ç¤ºä¾‹ï¼š**

```bash
# è½¬æ¢æ–‡æœ¬æ–‡ä»¶
fkt base64 document.txt

# è½¬æ¢å›¾ç‰‡
fkt base64 photo.jpg

# è½¬æ¢ PDF
fkt base64 report.pdf
```

**æŒ‡å®šè¾“å‡ºç›®å½•ï¼š**

```bash
fkt base64 file.txt -o ./output
```

**è¾“å‡ºæ ¼å¼ï¼š**

```json
{
  "type": "base64",
  "createdAt": "2024-12-12 10:30:45",
  "file": {
    "name": "document.txt",
    "extension": ".txt",
    "size": 1024,
    "base64": "SGVsbG8gV29ybGQh..."
  }
}
```

---

### 2ï¸âƒ£ Base64 è¿˜åŸ

ä» Base64 JSON æ–‡ä»¶æ¢å¤åŸå§‹æ–‡ä»¶ã€‚

**åŸºç¡€ç”¨æ³•ï¼š**

```bash
fkt restore <JSONæ–‡ä»¶è·¯å¾„>
```

**ç¤ºä¾‹ï¼š**

```bash
# è¿˜åŸæ–‡ä»¶ï¼ˆé»˜è®¤è¾“å‡ºåˆ°å½“å‰ç›®å½•ï¼‰
fkt restore archive.json

# æŒ‡å®šè¾“å‡ºç›®å½•
fkt restore archive.json -o ./restored
```

**ç‰¹æ€§ï¼š**

- âœ… è‡ªåŠ¨æ¢å¤åŸå§‹æ–‡ä»¶å
- âœ… ä¿ç•™æ–‡ä»¶æ‰©å±•å
- âœ… æ˜¾ç¤ºåŸå§‹åˆ›å»ºæ—¶é—´

---

### 3ï¸âƒ£ è§†é¢‘è½¬éŸ³é¢‘

ä»è§†é¢‘æ–‡ä»¶ä¸­æå–éŸ³é¢‘è½¨é“ï¼Œæ”¯æŒå¤šç§æ ¼å¼å’Œè´¨é‡é€‰é¡¹ã€‚

**åŸºç¡€ç”¨æ³•ï¼š**

```bash
fkt v2a <è§†é¢‘æ–‡ä»¶è·¯å¾„> [é€‰é¡¹]
# æˆ–
fkt video-to-audio <è§†é¢‘æ–‡ä»¶è·¯å¾„> [é€‰é¡¹]
```

#### æ”¯æŒçš„éŸ³é¢‘æ ¼å¼

| æ ¼å¼     | æ‰©å±•å  | ç¼–ç å™¨     | ç‰¹ç‚¹           | é€‚ç”¨åœºæ™¯        |
| -------- | ------- | ---------- | -------------- | --------------- |
| **MP3**  | `.mp3`  | libmp3lame | é€šç”¨å…¼å®¹æ€§æœ€å¥½ | æ—¥å¸¸ä½¿ç”¨ã€åˆ†äº«  |
| **AAC**  | `.m4a`  | aac        | Apple ç”Ÿæ€ä¼˜åŒ– | iOS/macOS è®¾å¤‡  |
| **FLAC** | `.flac` | flac       | æ— æŸå‹ç¼©       | éŸ³ä¹æ”¶è—ã€å½’æ¡£  |
| **ALAC** | `.m4a`  | alac       | Apple æ— æŸ     | iTunes/iOS æ— æŸ |
| **WAV**  | `.wav`  | pcm_s16le  | æœªå‹ç¼©         | ä¸“ä¸šéŸ³é¢‘ç¼–è¾‘    |

#### è´¨é‡é€‰é¡¹

| è´¨é‡       | MP3  | AAC  | FLAC   | è¯´æ˜         |
| ---------- | ---- | ---- | ------ | ------------ |
| **low**    | 128k | 128k | çº§åˆ« 0 | æœ€å¿«ï¼Œä½“ç§¯å° |
| **medium** | 192k | 192k | çº§åˆ« 5 | å¹³è¡¡æ¨è     |
| **high**   | 320k | 256k | çº§åˆ« 8 | æœ€ä½³è´¨é‡     |

#### ä½¿ç”¨ç¤ºä¾‹

**1. åŸºç¡€è½¬æ¢ï¼ˆä½¿ç”¨é»˜è®¤è®¾ç½®ï¼‰**

```bash
# äº¤äº’å¼é€‰æ‹©æ ¼å¼å’Œè´¨é‡
fkt v2a video.mp4
```

**2. æŒ‡å®šæ ¼å¼**

```bash
# è½¬æ¢ä¸º MP3ï¼ˆé«˜è´¨é‡ï¼‰
fkt v2a video.mp4 -f mp3 -q high

# è½¬æ¢ä¸º AACï¼ˆä¸­ç­‰è´¨é‡ï¼‰
fkt v2a video.mp4 -f aac -q medium

# è½¬æ¢ä¸º FLAC æ— æŸ
fkt v2a video.mp4 -f flac -q high
```

**3. æŒ‡å®šè¾“å‡ºè·¯å¾„**

```bash
# æŒ‡å®šè¾“å‡ºç›®å½•
fkt v2a video.mp4 -o ./audio -f mp3 -q high

# è¾“å‡ºå°†ä¿å­˜ä¸º: ./audio/video.mp3
```

**4. æ‰¹é‡è½¬æ¢**

```bash
# ä½¿ç”¨ shell å¾ªç¯æ‰¹é‡è½¬æ¢
for file in *.mp4; do
  fkt v2a "$file" -f mp3 -q high
done
```

#### è¿›åº¦æ˜¾ç¤º

è½¬æ¢è¿‡ç¨‹ä¸­ä¼šå®æ—¶æ˜¾ç¤ºè¿›åº¦ï¼š

```
â ‹ æ­£åœ¨æå–éŸ³é¢‘ 45%
```

å®Œæˆåæ˜¾ç¤ºè¾“å‡ºè·¯å¾„ï¼š

```
âœ” éŸ³é¢‘å·²æå–åˆ°: ./video.mp3
```

---

## ğŸ® å‘½ä»¤å‚è€ƒ

### å…¨å±€é€‰é¡¹

| é€‰é¡¹            | åˆ«å | æè¿°         |
| --------------- | ---- | ------------ |
| `--help`        | `-h` | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ |
| `--interactive` | `-i` | å¯åŠ¨äº¤äº’æ¨¡å¼ |
| `--version`     | `-v` | æ˜¾ç¤ºç‰ˆæœ¬å·   |

### base64 å‘½ä»¤

```bash
fkt base64 <input> [é€‰é¡¹]
```

**é€‰é¡¹ï¼š**

- `-o, --output <path>` - è¾“å‡ºç›®å½•ï¼ˆé»˜è®¤ï¼šè¾“å…¥æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼‰

**åˆ«åï¼š** æ— 

---

### restore å‘½ä»¤

```bash
fkt restore <input> [é€‰é¡¹]
```

**é€‰é¡¹ï¼š**

- `-o, --output <path>` - è¾“å‡ºç›®å½•ï¼ˆé»˜è®¤ï¼šJSON æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼‰

**åˆ«åï¼š** æ— 

---

### video-to-audio å‘½ä»¤

```bash
fkt video-to-audio <input> [é€‰é¡¹]
fkt v2a <input> [é€‰é¡¹]
```

**é€‰é¡¹ï¼š**

- `-o, --output <path>` - è¾“å‡ºç›®å½•ï¼ˆé»˜è®¤ï¼šè§†é¢‘æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼‰
- `-f, --format <format>` - éŸ³é¢‘æ ¼å¼ï¼ˆmp3/aac/flac/alac/wavï¼‰
- `-q, --quality <quality>` - éŸ³é¢‘è´¨é‡ï¼ˆlow/medium/highï¼‰

**åˆ«åï¼š** `v2a`

---

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1ï¼šæ–‡ä»¶åˆ†äº«ä¸å­˜å‚¨

**é—®é¢˜ï¼š** éœ€è¦å°†äºŒè¿›åˆ¶æ–‡ä»¶è½¬æ¢ä¸ºæ–‡æœ¬æ ¼å¼ï¼Œä¾¿äºåœ¨ API æˆ–æ•°æ®åº“ä¸­å­˜å‚¨ã€‚

**è§£å†³æ–¹æ¡ˆï¼š**

```bash
# è½¬æ¢ä¸º Base64
fkt base64 document.pdf -o ./archive

# é€šè¿‡ API ä¼ è¾“æˆ–å­˜å‚¨åˆ°æ•°æ®åº“
# ...

# éœ€è¦æ—¶è¿˜åŸ
fkt restore ./archive/document.json -o ./restored
```

---

### åœºæ™¯ 2ï¼šè§†é¢‘ç´ æéŸ³é¢‘æå–

**é—®é¢˜ï¼š** ä»è§†é¢‘ç´ æä¸­æå–éŸ³é¢‘ç”¨äºåæœŸåˆ¶ä½œã€‚

**è§£å†³æ–¹æ¡ˆï¼š**

```bash
# æå–é«˜è´¨é‡ MP3
fkt v2a interview.mp4 -f mp3 -q high -o ./audio

# æå–æ— æŸ FLACï¼ˆç”¨äºä¸“ä¸šç¼–è¾‘ï¼‰
fkt v2a concert.mp4 -f flac -q high -o ./audio
```

---

### åœºæ™¯ 3ï¼šéŸ³ä¹å½’æ¡£

**é—®é¢˜ï¼š** ä» MV è§†é¢‘ä¸­æå–éŸ³ä¹ï¼Œåˆ›å»ºä¸ªäººéŸ³ä¹åº“ã€‚

**è§£å†³æ–¹æ¡ˆï¼š**

```bash
# Apple è®¾å¤‡ç”¨æˆ·ï¼šä½¿ç”¨ AAC æˆ– ALAC
fkt v2a music_video.mp4 -f aac -q high

# æ— æŸæ”¶è—ï¼šä½¿ç”¨ FLAC
fkt v2a music_video.mp4 -f flac -q high
```

---

## ğŸ“Š æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         CLI å±‚ (cli.ts)            â”‚  â† Citty å‘½ä»¤è¡Œè§£æ
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       Config å±‚ (config/)           â”‚  â† é…ç½®ç®¡ç†
â”‚  â€¢ defaults.ts  (é»˜è®¤é…ç½®)           â”‚
â”‚  â€¢ audio-formats.ts  (æ ¼å¼é…ç½®)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      Commands å±‚ (commands/)        â”‚  â† å‘½ä»¤å¤„ç† + Clack äº¤äº’
â”‚  â€¢ base64.ts                        â”‚
â”‚  â€¢ restore.ts                       â”‚
â”‚  â€¢ video-to-audio.ts                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        Core å±‚ (core/)              â”‚  â† æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚  â€¢ base64-converter.ts              â”‚
â”‚  â€¢ video-converter.ts               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       Utils å±‚ (utils/)             â”‚  â† é€šç”¨å·¥å…·å‡½æ•°
â”‚  â€¢ errors.ts  (é”™è¯¯å¤„ç†)             â”‚
â”‚  â€¢ helpers.ts  (å‘½ä»¤åŠ©æ‰‹)            â”‚
â”‚  â€¢ file.ts  (æ–‡ä»¶å·¥å…·)               â”‚
â”‚  â€¢ logger.ts  (æ—¥å¿—è¾“å‡º)             â”‚
â”‚  â€¢ prompts.ts  (äº¤äº’æç¤º)            â”‚
â”‚  â€¢ time.ts  (æ—¶é—´æ ¼å¼åŒ–)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **CLI æ¡†æ¶ï¼š** [Citty](https://github.com/unjs/citty) - ç°ä»£åŒ–å‘½ä»¤è¡Œæ¡†æ¶
- **äº¤äº’ç•Œé¢ï¼š** [Clack](https://github.com/natemoo-re/clack) - ç¾è§‚çš„ CLI æç¤ºåº“
- **è§†é¢‘å¤„ç†ï¼š** [FFmpeg](https://ffmpeg.org/) - å¼ºå¤§çš„å¤šåª’ä½“å¤„ç†å·¥å…·
- **æ ·å¼è¾“å‡ºï¼š** [Ansis](https://github.com/webdiscus/ansis) - è½»é‡çº§ç»ˆç«¯é¢œè‰²åº“

---

## âš™ï¸ é…ç½®

### ç¯å¢ƒå˜é‡

```bash
# å¼€å¯è°ƒè¯•æ¨¡å¼ï¼ˆæ˜¾ç¤ºè¯¦ç»†é”™è¯¯å †æ ˆï¼‰
DEBUG=1 fkt base64 file.txt
```

---

## ğŸ”§ å¸¸è§é—®é¢˜

### Q1: FFmpeg ç›¸å…³é”™è¯¯

**é”™è¯¯ï¼š** `FFmpeg æœªæ‰¾åˆ°`

**è§£å†³æ–¹æ¡ˆï¼š**

```bash
# macOS
brew install ffmpeg

# Ubuntu/Debian
sudo apt-get install ffmpeg

# Windows (ä½¿ç”¨ Chocolatey)
choco install ffmpeg

# æˆ–è€…ä¸‹è½½é¢„ç¼–è¯‘ç‰ˆæœ¬
# https://ffmpeg.org/download.html
```

---

### Q2: è§†é¢‘è½¬éŸ³é¢‘è¿›åº¦å¡ä½

**åŸå› ï¼š** è§†é¢‘æ–‡ä»¶æŸåæˆ–æ ¼å¼ä¸æ”¯æŒ

**è§£å†³æ–¹æ¡ˆï¼š**

1. æ£€æŸ¥è§†é¢‘æ–‡ä»¶æ˜¯å¦å®Œæ•´
2. ä½¿ç”¨ `ffmpeg -i video.mp4` æµ‹è¯•æ–‡ä»¶æ˜¯å¦å¯è¯»
3. å°è¯•å…¶ä»–æ ¼å¼è¾“å‡º

---

### Q3: Base64 æ–‡ä»¶è¿‡å¤§

**åŸå› ï¼š** Base64 ç¼–ç ä¼šå¢åŠ çº¦ 33% çš„ä½“ç§¯

**å»ºè®®ï¼š**

- å¯¹äºå¤§æ–‡ä»¶ï¼ˆ>10MBï¼‰ï¼Œè€ƒè™‘ä½¿ç”¨å‹ç¼©å·¥å…·ï¼ˆå¦‚ `zip`ï¼‰
- Base64 æ›´é€‚åˆå°å‹æ–‡ä»¶æˆ–éœ€è¦æ–‡æœ¬ä¼ è¾“çš„åœºæ™¯

---

### Q4: æƒé™é”™è¯¯

**é”™è¯¯ï¼š** `EACCES: permission denied`

**è§£å†³æ–¹æ¡ˆï¼š**

```bash
# æ£€æŸ¥æ–‡ä»¶æƒé™
ls -la file.txt

# ä¿®æ”¹æƒé™
chmod 644 file.txt

# æˆ–ä½¿ç”¨ sudoï¼ˆä¸æ¨èï¼‰
sudo fkt base64 file.txt
```

---

## ğŸ“ å¼€å‘

### æœ¬åœ°å¼€å‘

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/coderking3/file-kit.git
cd file-kit

# å®‰è£…ä¾èµ–
pnpm install

# å¼€å‘æ¨¡å¼è¿è¡Œ
pnpm dev base64 test.txt

# ç±»å‹æ£€æŸ¥
pnpm typecheck

# ä»£ç æ ¼å¼åŒ–
pnpm format

# æ„å»º
pnpm build
```

### é¡¹ç›®ç»“æ„

```
file-kit/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ cli.ts              # CLI å…¥å£
â”‚   â”œâ”€â”€ config/             # é…ç½®å±‚
â”‚   â”œâ”€â”€ commands/           # å‘½ä»¤å±‚
â”‚   â”œâ”€â”€ core/               # æ ¸å¿ƒé€»è¾‘å±‚
â”‚   â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°å±‚
â”‚   â””â”€â”€ types/              # ç±»å‹å®šä¹‰
â”œâ”€â”€ bin/
â”‚   â””â”€â”€ cli.mjs             # å¯æ‰§è¡Œæ–‡ä»¶
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

---

## ğŸ“„ è®¸å¯è¯

[MIT License](LICENSE) Â© 2024 King3

---

## ğŸ”— ç›¸å…³é“¾æ¥

- [GitHub ä»“åº“](https://github.com/coderking3/file-kit)
- [NPM åŒ…](https://www.npmjs.com/package/@king3/file-kit)
- [é—®é¢˜åé¦ˆ](https://github.com/coderking3/file-kit/issues)
- [æ›´æ–°æ—¥å¿—](https://github.com/coderking3/file-kit/releases)

---

## ğŸ’¬ è”ç³»æ–¹å¼

- **ä½œè€…ï¼š** King3
- **é‚®ç®±ï¼š** king3.wm@gmail.com
- **é—®é¢˜åé¦ˆï¼š** [GitHub Issues](https://github.com/coderking3/file-kit/issues)

---

<div align="center">

**å¦‚æœè¿™ä¸ªå·¥å…·å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸€ä¸ª â­ï¸ Star æ”¯æŒä¸€ä¸‹ï¼**

Made with â¤ï¸ by King3

</div>
